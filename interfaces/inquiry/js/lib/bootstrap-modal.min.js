!function(a){"use strict";var b=function(a,b){this.init(a,b)};b.prototype={constructor:b,init:function(b,c){var d=this;this.options=c,this.$element=a(b).delegate('[data-dismiss="modal"]',"click.dismiss.modal",a.proxy(this.hide,this)),this.options.remote&&this.$element.find(".modal-body").load(this.options.remote,function(){var b=a.Event("loaded");d.$element.trigger(b)});var e="function"==typeof this.options.manager?this.options.manager.call(this):this.options.manager;e=e.appendModal?e:a(e).modalmanager().data("modalmanager"),e.appendModal(this)},toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var b=a.Event("show");this.isShown||(this.$element.trigger(b),b.isDefaultPrevented()||(this.escape(),this.tab(),this.options.loading&&this.loading()))},hide:function(b){b&&b.preventDefault(),b=a.Event("hide"),this.$element.trigger(b),this.isShown&&!b.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.tab(),this.isLoading&&this.loading(),a(document).off("focusin.modal"),this.$element.removeClass("in").removeClass("animated").removeClass(this.options.attentionAnimation).removeClass("modal-overflow").attr("aria-hidden",!0),a.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal())},layout:function(){var b=this.options.height?"height":"max-height",c=this.options.height||this.options.maxHeight;if(this.options.width){this.$element.css("width",this.options.width);var d=this;this.$element.css("margin-left",function(){return/%/gi.test(d.options.width)?-(parseInt(d.options.width)/2)+"%":-(a(this).width()/2)+"px"})}else this.$element.css("width",""),this.$element.css("margin-left","");this.$element.find(".modal-body").css("overflow","").css(b,""),c&&this.$element.find(".modal-body").css("overflow","auto").css(b,c);var e=a(window).height()-10<this.$element.height();e||this.options.modalOverflow?this.$element.css("margin-top",0).addClass("modal-overflow"):this.$element.css("margin-top",0-this.$element.height()/2).removeClass("modal-overflow")},tab:function(){var b=this;this.isShown&&this.options.consumeTab?this.$element.on("keydown.tabindex.modal","[data-tabindex]",function(c){if(c.keyCode&&9==c.keyCode){var d=a(this),e=a(this);b.$element.find("[data-tabindex]:enabled:not([readonly])").each(function(b){d=b.shiftKey?d.data("tabindex")>a(this).data("tabindex")?d=a(this):e=a(this):d.data("tabindex")<a(this).data("tabindex")?d=a(this):e=a(this)}),d[0]!==a(this)[0]?d.focus():e.focus(),c.preventDefault()}}):this.isShown||this.$element.off("keydown.tabindex.modal")},escape:function(){var a=this;this.isShown&&this.options.keyboard?(this.$element.attr("tabindex")||this.$element.attr("tabindex",-1),this.$element.on("keyup.dismiss.modal",function(b){27==b.which&&a.hide()})):this.isShown||this.$element.off("keyup.dismiss.modal")},hideWithTransition:function(){var b=this,c=setTimeout(function(){b.$element.off(a.support.transition.end),b.hideModal()},500);this.$element.one(a.support.transition.end,function(){clearTimeout(c),b.hideModal()})},hideModal:function(){var a=this.options.height?"height":"max-height",b=this.options.height||this.options.maxHeight;b&&this.$element.find(".modal-body").css("overflow","").css(a,""),this.$element.hide().trigger("hidden")},removeLoading:function(){this.$loading.remove(),this.$loading=null,this.isLoading=!1},loading:function(b){b=b||function(){};var c=this.$element.hasClass("fade")?"fade":"";if(this.isLoading)if(this.isLoading&&this.$loading){this.$loading.removeClass("in");var e=this;a.support.transition&&this.$element.hasClass("fade")?this.$loading.one(a.support.transition.end,function(){e.removeLoading()}):e.removeLoading()}else b&&b(this.isLoading);else{var d=a.support.transition&&c;this.$loading=a('<div class="loading-mask '+c+'">').append(this.options.spinner).appendTo(this.$element),d&&this.$loading[0].offsetWidth,this.$loading.addClass("in"),this.isLoading=!0,d?this.$loading.one(a.support.transition.end,b):b()}},focus:function(){var a=this.$element.find(this.options.focusOn);a=a.length?a:this.$element,a.focus()},attention:function(){if(this.options.attentionAnimation){this.$element.removeClass("animated").removeClass(this.options.attentionAnimation);var a=this;setTimeout(function(){a.$element.addClass("animated").addClass(a.options.attentionAnimation)},0)}this.focus()},destroy:function(){var b=a.Event("destroy");this.$element.trigger(b),b.isDefaultPrevented()||(this.$element.off(".modal").removeData("modal").removeClass("in").attr("aria-hidden",!0),this.$parent!==this.$element.parent()?this.$element.appendTo(this.$parent):this.$parent.length||(this.$element.remove(),this.$element=null),this.$element.trigger("destroyed"))}},a.fn.modal=function(c,d){return this.each(function(){var e=a(this),f=e.data("modal"),g=a.extend({},a.fn.modal.defaults,e.data(),"object"==typeof c&&c);f||e.data("modal",f=new b(this,g)),"string"==typeof c?f[c].apply(f,[].concat(d)):g.show&&f.show()})},a.fn.modal.defaults={keyboard:!0,backdrop:!0,loading:!1,show:!0,width:null,height:null,maxHeight:null,modalOverflow:!1,consumeTab:!0,focusOn:null,replace:!1,resize:!1,attentionAnimation:"shake",manager:"body",spinner:'<div class="loading-spinner" style="width: 200px; margin-left: -100px;"><div class="progress progress-striped active"><div class="bar" style="width: 100%;"></div></div></div>',backdropTemplate:'<div class="modal-backdrop" />'},a.fn.modal.Constructor=b,a(function(){a(document).off("click.modal").on("click.modal.data-api",'[data-toggle="modal"]',function(b){var c=a(this),d=c.attr("href"),e=a(c.attr("data-target")||d&&d.replace(/.*(?=#[^\s]+$)/,"")),f=e.data("modal")?"toggle":a.extend({remote:!/#/.test(d)&&d},e.data(),c.data());b.preventDefault(),e.modal(f).one("hide",function(){c.focus()})})})}(window.jQuery);